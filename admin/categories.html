<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <title>Админ панел – Категории</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Основни стилове на админ панела -->
  <link rel="stylesheet" href="css/admin-layout.css" />
  <link rel="stylesheet" href="css/admin-dashboard.css" />
  <link rel="stylesheet" href="css/admin-products.css" />
  <!-- Специални стилове за categories -->
  <link rel="stylesheet" href="css/admin-categories.css" />
</head>
<body class="admin-body">
  <div class="admin-layout">
    <!-- SIDEBAR -->
    <aside class="admin-sidebar">
      <div class="admin-logo">
        DRЪSTЪR <span>ADMIN</span>
      </div>

      <nav class="admin-nav">
        <a href="index.html" class="admin-nav-link">
          Табло
        </a>
        <a href="products.html" class="admin-nav-link">
          Продукти
        </a>
        <a href="categories.html" class="admin-nav-link admin-nav-link--active">
          Категории
        </a>
      </nav>

      <div class="admin-sidebar-footer">
        Влезли сте като: admin@drustar.bg
      </div>
    </aside>

    <!-- MAIN -->
    <main class="admin-main">
      <!-- TOPBAR -->
      <header class="admin-topbar">
        <div class="admin-topbar-title">
          Управление на категории
        </div>
        <div class="admin-topbar-right">
          <div class="admin-topbar-user">Администратор</div>
          <button class="admin-topbar-logout" type="button">
            Изход
          </button>
        </div>
      </header>

      <!-- CONTENT -->
      <section class="admin-content">
        <div class="admin-content-inner">

          <h1 class="admin-page-title">Категории и подкатегории</h1>

          <!-- малък инфо блок (по избор) -->
          <p class="admin-categories-intro">
            Тук управлявате основните категории и подкатегории, които се използват
            във фронтенд каталога. Промените се записват в <code>categories.json</code>.
          </p>

          <!-- Две колони: Категории / Подкатегории -->
          <div class="admin-categories-layout">

            <!-- Лява колона: Категории -->
            <section class="admin-categories-panel">
              <div class="admin-categories-header-row">
                <h2 class="admin-categories-subtitle">Категории</h2>
                <span class="admin-categories-count" id="admin-categories-count">
                  0 категории
                </span>
              </div>

              <div class="admin-products-toolbar admin-categories-toolbar">
                <input
                  type="text"
                  id="admin-categories-search"
                  placeholder="Търси по име или ID..."
                />
                <button
                  type="button"
                  class="admin-products-btn"
                  id="admin-add-category-btn"
                >
                  + Нова категория
                </button>
              </div>

              <div class="admin-products-table-wrapper admin-categories-table-wrapper">
                <table class="admin-products-table admin-categories-table">
                  <thead>
                    <tr>
                      <th style="width: 80px;">ID</th>
                      <th>Име</th>
                      <th style="width: 80px;">Ред</th>
                      <th style="width: 110px;">Активна</th>
                      <th style="width: 140px;">Действия</th>
                    </tr>
                  </thead>
                  <tbody id="admin-categories-tbody">
                    <!-- редове за категориите се рендерират от JS -->
                  </tbody>
                </table>
              </div>
            </section>

            <!-- Дясна колона: Подкатегории -->
            <section class="admin-subcategories-panel">
              <div class="admin-categories-header-row">
                <h2 class="admin-categories-subtitle">
                  Подкатегории
                  <span class="admin-subcategories-for" id="admin-subcategories-for">
                    (за избрана категория)
                  </span>
                </h2>
                <span class="admin-categories-count" id="admin-subcategories-count">
                  0 подкатегории
                </span>
              </div>

              <div class="admin-products-toolbar admin-subcategories-toolbar">
                <input
                  type="text"
                  id="admin-subcategories-search"
                  placeholder="Търси подкатегория..."
                />
                <button
                  type="button"
                  class="admin-products-btn"
                  id="admin-add-subcategory-btn"
                >
                  + Нова подкатегория
                </button>
              </div>

              <div class="admin-products-table-wrapper admin-subcategories-table-wrapper">
                <table class="admin-products-table admin-subcategories-table">
                  <thead>
                    <tr>
                      <th style="width: 80px;">ID</th>
                      <th>Име</th>
                      <th style="width: 120px;">Категория</th>
                      <th style="width: 80px;">Ред</th>
                      <th style="width: 140px;">Действия</th>
                    </tr>
                  </thead>
                  <tbody id="admin-subcategories-tbody">
                    <!-- редове за подкатегориите се рендерират от JS -->
                  </tbody>
                </table>
              </div>
            </section>

                        <!-- Трета колона: Под-подкатегории -->
            <section class="admin-subsubcategories-panel">
              <div class="admin-categories-header-row">
                <h2 class="admin-categories-subtitle">
                  Под-подкатегории
                  <span class="admin-subsubcategories-for" id="admin-subsubcategories-for">
                    (за избрана подкатегория)
                  </span>
                </h2>
                <span
                  class="admin-categories-count"
                  id="admin-subsubcategories-count"
                >
                  0 под-подкатегории
                </span>
              </div>

              <div class="admin-products-toolbar admin-subsubcategories-toolbar">
                <input
                  type="text"
                  id="admin-subsubcategories-search"
                  placeholder="Търси под-подкатегория…"
                />
                <button
                  type="button"
                  class="admin-products-btn"
                  id="admin-add-subsubcategory-btn"
                >
                  + Нова под-подкатегория
                </button>
              </div>

              <div
                class="admin-products-table-wrapper admin-subsubcategories-table-wrapper"
              >
                <table
                  class="admin-products-table admin-subsubcategories-table"
                >
                  <thead>
                    <tr>
                      <th style="width: 80px;">ID</th>
                      <th>Име</th>
                      <th style="width: 180px;">Подкатегория</th>
                      <th style="width: 80px;">Ред</th>
                      <th style="width: 140px;">Действия</th>
                    </tr>
                  </thead>
                  <tbody id="admin-subsubcategories-tbody">
                    <!-- редовете се рендерират от JS -->
                  </tbody>
                </table>
              </div>
            </section>


          </div>

        </div>
      </section>
    </main>
  </div>

    <!-- МОДАЛ: Категория -->
  <div class="admin-modal-backdrop" id="admin-category-modal-backdrop">
    <div class="admin-modal">
      <div class="admin-modal-header">
        <h2 class="admin-modal-title" id="admin-category-modal-title">
          Нова категория
        </h2>
        <button
          class="admin-modal-close"
          type="button"
          data-close-category-modal
        >
          ✕
        </button>
      </div>

      <form id="admin-category-form" class="admin-product-form">
        <div class="admin-product-form-grid">
          <div class="admin-form-group">
            <label for="admin-category-id">ID на категория</label>
            <input type="text" id="admin-category-id" required />
          </div>

          <div class="admin-form-group">
            <label for="category-name">Име на категория</label>
            <input type="text" id="category-name" name="name" required />
          </div>

          <div class="admin-form-group">
            <label for="category-order">Ред (order)</label>
            <input
              type="number"
              id="category-order"
              name="order"
              min="0"
              step="1"
            />
          </div>

          <div class="admin-form-group">
            <label for="category-active">Активна</label>
            <select id="category-active" name="active">
              <option value="true" selected>Да</option>
              <option value="false">Не</option>
            </select>
          </div>
        </div>

        <div class="admin-modal-footer">
          <button
            type="button"
            class="admin-modal-secondary"
            data-close-category-modal
          >
            Отказ
          </button>
          <button type="submit" class="admin-modal-primary">
            Запази категория
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- МОДАЛ: Подкатегория -->
  <div class="admin-modal-backdrop" id="admin-subcategory-modal-backdrop">
    <div class="admin-modal">
      <div class="admin-modal-header">
        <h2 class="admin-modal-title" id="admin-subcategory-modal-title">
          Нова подкатегория
        </h2>
        <button
          class="admin-modal-close"
          type="button"
          data-close-subcategory-modal
        >
          ✕
        </button>
      </div>

      <form id="admin-subcategory-form" class="admin-product-form">
        <div class="admin-product-form-grid">
          <div class="admin-form-group">
            <label for="subcat-id">ID на подкатегория</label>
            <input type="text" id="subcat-id" name="id" required />
          </div>

          <div class="admin-form-group">
            <label for="subcat-name">Име на подкатегория</label>
            <input type="text" id="subcat-name" name="name" required />
          </div>

          <div class="admin-form-group">
            <label for="subcat-categoryId">Категория</label>
            <select id="subcat-categoryId" name="categoryId" required>
              <!-- пълни се от JS -->
            </select>
          </div>

          <div class="admin-form-group">
            <label for="subcat-order">Ред (order)</label>
            <input
              type="number"
              id="subcat-order"
              name="order"
              min="0"
              step="1"
            />
          </div>
        </div>

        <div class="admin-modal-footer">
          <button
            type="button"
            class="admin-modal-secondary"
            data-close-subcategory-modal
          >
            Отказ
          </button>
          <button type="submit" class="admin-modal-primary">
            Запази подкатегория
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- МОДАЛ: Под-подкатегория -->
  <div class="admin-modal-backdrop" id="admin-subsubcategory-modal-backdrop">
    <div class="admin-modal">
      <div class="admin-modal-header">
        <h2 class="admin-modal-title" id="admin-subsubcategory-modal-title">
          Нова под-подкатегория
        </h2>
        <button
          class="admin-modal-close"
          type="button"
          data-close-subsubcategory-modal
        >
          ✕
        </button>
      </div>

      <form id="admin-subsubcategory-form" class="admin-product-form">
        <div class="admin-product-form-grid">
          <div class="admin-form-group">
            <label for="admin-subsubcategory-id">ID на под-подкатегория</label>
            <input
              type="text"
              id="admin-subsubcategory-id"
              name="id"
              required
            />
          </div>

          <div class="admin-form-group">
            <label for="subsub-name">Име на под-подкатегория</label>
            <input type="text" id="subsub-name" name="name" required />
          </div>

          <div class="admin-form-group">
            <label for="subsub-parent">Подкатегория</label>
            <select id="subsub-parent" name="subcategoryId" required>
              <!-- пълни се от JS -->
            </select>
          </div>

          <div class="admin-form-group">
            <label for="subsub-order">Ред (order)</label>
            <input
              type="number"
              id="subsub-order"
              name="order"
              min="0"
              step="1"
            />
          </div>
        </div>

        <div class="admin-modal-footer">
          <button
            type="button"
            class="admin-modal-secondary"
            data-close-subsubcategory-modal
          >
            Отказ
          </button>
          <button type="submit" class="admin-modal-primary">
            Запази под-подкатегория
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- JS логика за категории/подкатегории -->
  <script src="js/admin-api.js"></script>
  <script src="js/admin-categories.js?v=5" ></script>
</body>
</html>
